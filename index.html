<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <title>Game of Life</title>
    <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'>
    <meta name='author' content='Paweł Kania'>
    <link rel='shortcut icon' type='image/x-icon' href='favicon.ico' />

    <link href='https://use.fontawesome.com/releases/v5.15.3/css/all.css' rel='stylesheet' integrity='sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk' crossorigin='anonymous'>
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6' crossorigin='anonymous'>
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0' crossorigin='anonymous'>
    <script src='https://code.jquery.com/jquery-3.6.0.min.js' integrity='sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=' crossorigin='anonymous'></script>
    <script src='https://code.jquery.com/ui/1.12.0/jquery-ui.min.js' integrity='sha256-eGE6blurk5sHj+rmkfsGYeKyZx3M4bG+ZlFyA7Kns7E=' crossorigin='anonymous'></script>
    <script src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js' integrity='sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf' crossorigin='anonymous'></script>

    <link href='css/styles.css' rel='stylesheet'>
    <link href='css/slider.css' rel='stylesheet'>
    <script src='js/app.js' type='application/javascript'></script>
    <script src='js/life.js' type='application/javascript'></script>
    <script src='js/file.js' type='application/javascript'></script>
    <script src='js/point.js' type='application/javascript'></script>
    <script src='js/gallery.js' type='application/javascript'></script>
    <script src='js/jquery.utility.js' type='application/javascript'></script>
    <script src='js/libs/zip-fs.min.js' type='application/javascript'></script>
    <script src='js/libs/hashlife.js' type='application/javascript'></script>
    <script src='js/libs/hashlife.adapter.js' type='application/javascript'></script>

    <script>
        $(() => UI.init());
    </script>
</head>
<body>
    <div id='coords' class='rounded-pill collapse px-2'>
        <div id='coord-x'></div>,
        <div id='coord-y'></div>
    </div>
    <canvas id='game-of-life'></canvas>
    <div id='toolbar' class='btn-toolbar d-flex flex-wrap-reverse justify-content-end' role='toolbar'>
        <div class='btn-group me-1 mb-1' role='group'>
            <a id='btn-play' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Play'>
                <i class='fas fa-play' aria-hidden='true'></i>
            </a>
            <a id='btn-next' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Next'>
                <i class='fas fa-step-forward' aria-hidden='true'></i>
            </a>
            <a id='btn-clear' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Clear'>
                <i class='fas fa-eraser' aria-hidden='true'></i>
            </a>
        </div>
        <div class='btn-group me-1 mb-1' role='group'>
            <a id='btn-slower' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Slower'>
                <i class='fas fa-fast-backward' aria-hidden='true'></i>
            </a>
            <input id='in-speed' type='text' class='form-control form-inline text-center p-1 rounded-0' size='1' placeholder='Speed' aria-label='Speed'>
            <a id='btn-faster' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Faster'>
                <i class='fas fa-fast-forward' aria-hidden='true'></i>
            </a>
        </div>
        <div class='btn-group me-1 mb-1' role='group'>
            <input id='btn-select' type='checkbox' class='btn-check' autocomplete='off'>
            <label class='btn btn-secondary' for='btn-select' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Select'>
                <i class='fas fa-vector-square' aria-hidden='true'></i>
            </label>
            <a id='btn-cut' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Cut'>
                <i class='fas fa-cut' aria-hidden='true'></i>
            </a>
            <a id='btn-paste' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Paste'>
                <i class='fas fa-paste' aria-hidden='true'></i>
            </a>
        </div>
        <div id='gr-file-info' class='btn-group me-1 mb-1 d-none' role='group'>
            <a id='btn-info' type='button' class='btn btn-secondary' data-bs-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                <i class='fas fa-info-circle' aria-hidden='true'></i>
            </a>
            <div id='dropdown-info' class='dropdown-menu p-3'>
                <div id='gr-info-title'>
                    <p class='fs-5'>Title</p>
                    <p id='info-title' class='text-muted'></p>
                    <hr class='dropdown-divider'>
                </div>
                <div id='gr-info-author'>
                    <p class='fs-5'>Author</p>
                    <p id='info-author' class='text-muted'></p>
                    <hr class='dropdown-divider'>
                </div>
                <div id='gr-info-comments'>
                    <p class='fs-5'>Comments</p>
                    <p id='info-comments' class='text-muted'></p>
                    <hr class='dropdown-divider'>
                </div>
            </div>
            <a id='btn-reload' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Reload'>
                <i class='fas fa-redo' aria-hidden='true'></i>
            </a>
        </div>
        <div class='btn-group me-1 mb-1' role='group'>
            <a id='btn-load' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Load'>
                <i class='fas fa-folder-open' aria-hidden='true'></i>
            </a>
            <a id='btn-save' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Save'>
                <i class='fas fa-save' aria-hidden='true'></i>
            </a>
            <a id='btn-gallery' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Gallery'>
                <i class='fas fa-images' aria-hidden='true'></i>
            </a>
            <a id='btn-random' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Random'>
                <i class='fas fa-random' aria-hidden='true'></i>
            </a>
            <a id='btn-settings' type='button' class='btn btn-secondary' data-bs-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
                <i class='fas fa-sliders-h' aria-hidden='true'></i>
            </a>
            <form id='dropdown-settings' class='dropdown-menu px-3' autocomplete='off'>
                <div class='mt-2'>
                    <label>Settings</label>
                </div>
                <div>
                    <hr class='dropdown-divider'>
                </div>
                <div class='row g-2 mt-1 mb-3'>
                    <div class='col'>
                        <div class='form-floating'>
                            <input id='in-game-rule' type='text' class='form-control' aria-label='Rulestring'>
                            <label for='in-game-rule'>Rule</label>
                        </div>
                    </div>
                    <div class='col'>
                        <div class='form-floating'>
                            <select id='in-game-rule-name' class='form-select' aria-label='Rule name'>
                                <option value='B0123478/S01234678'>AntiLife</option>
                                <option value='B0123478/S34678'>InverseLife</option>
                                <option value='B1/S012345678'>H-trees</option>
                                <option value='B1/S1'>Gnarl</option>
                                <option value='B1357/S02468'>Fredkin</option>
                                <option value='B1357/S1357'>Replicator</option>
                                <option value='B2/S'>Seeds</option>
                                <option value='B2/S0'>Live Free or Die</option>
                                <option value='B234/S'>Serviettes</option>
                                <option value='B25678/S5678'>Iceballs</option>
                                <option value='B3/S012345678'>Life without death</option>
                                <option value='B3/S023'>DotLife</option>
                                <option value='B3/S12'>Flock</option>
                                <option value='B3/S1234'>Mazectric</option>
                                <option value='B3/S12345'>Maze</option>
                                <option value='B3/S1237'>SnowLife</option>
                                <option value='B3/S124'>Corrosion of Conformity</option>
                                <option value='B3/S13'>LowLife</option>
                                <option value='B3/S2'>StillLife</option>
                                <option value='B3/S23' selected>Conway's Life</option>
                                <option value='B3/S238'>EightLife</option>
                                <option value='B3/S45678'>Coral</option>
                                <option value='B34/S34'>3-4 Life</option>
                                <option value='B34/S456'>Bacteria</option>
                                <option value='B345/S2'>Blinkers</option>
                                <option value='B345/S4567'>Assimilation</option>
                                <option value='B345/S5'>Long Life</option>
                                <option value='B3457/S4568'>Gems</option>
                                <option value='B34578/S456'>Gems Minor</option>
                                <option value='B35/S234578'>Land Rush</option>
                                <option value='B3567/S15678'>Bugs</option>
                                <option value='B35678/S4678'>Holstein</option>
                                <option value='B35678/S5678'>Diamoeba</option>
                                <option value='B357/S1358'>Amoeba</option>
                                <option value='B357/S238'>Pseudo Life</option>
                                <option value='B36/S125'>2×2</option>
                                <option value='B36/S235'>Blinker Life</option>
                                <option value='B36/S23'>HighLife</option>
                                <option value='B367/S125678'>Slow Blob</option>
                                <option value='B3678/S235678'>Stains</option>
                                <option value='B3678/S34678'>Day & Night</option>
                                <option value='B368/S238'>LowDeath</option>
                                <option value='B368/S245'>Move</option>
                                <option value='B37/S1234'>Mazectric with Mice</option>
                                <option value='B37/S12345'>Maze with Mice</option>
                                <option value='B37/S23'>DryLife</option>
                                <option value='B378/S012345678'>Plow World</option>
                                <option value='B378/S235678'>Coagulations</option>
                                <option value='B38/S23'>Pedestrian Life</option>
                                <option value='B38/S238'>HoneyLife</option>
                                <option value='B45/S12345'>Electrified Maze</option>
                                <option value='B45678/S2345'>Walled cities</option>
                                <option value='B4678/S35678'>Vote 4/5</option>
                                <option value='B5678/S45678'>Vote</option>
                                <option class='d-none' disabled>Custom</option>
                            </select>
                            <label for='in-game-rule-name'>Name</label>
                        </div>
                    </div>
                </div>
                <div class='mb-3 form-floating'>
                    <select id='in-board-type' class='form-select' aria-label='Choose board type'>
                        <option value='infinite' selected>Infinite</option>
                        <option value='finite'>Finite</option>
                        <option value='wrapped'>Wrapped</option>
                    </select>
                    <label for='in-board-type'>Board type</label>
                </div>
                <div id='gr-board-size' class='mb-3 collapse'>
                    <label for='in-board-size' class='form-label'>Board size</label>
                    <div id='in-board-size' class='input-group'>
                        <input id='in-board-width' type='text' class='form-control text-center' size='9' aria-label='Width'>
                        <span class='input-group-text'>x</span>
                        <input id='in-board-height' type='text' class='form-control text-center' size='9' aria-label='Height'>
                    </div>
                </div>
                <div id='gr-game-step' class='mb-3'>
                    <label for='in-game-step' class='form-label'>Generation step</label>
                    <div class='range-slider'>
                        <input id='in-game-step' class='range-slider__range' type='range' value='0' min='0' max='16' step='1'>
                        <span class='range-slider__value'></span>
                    </div>
                </div>
                <div class='mb-3 form-floating'>
                    <select id='in-coord-display' class='form-select' aria-label='Choose how coords label should be displayed'>
                        <option value='follow' selected>Follow cursor</option>
                        <option value='corner'>In the corner</option>
                        <option value='off'>Don't show</option>
                    </select>
                    <label for='in-coord-display'>Coordinates</label>
                </div>
                <div>
                    <hr class='dropdown-divider'>
                </div>
                <div class='mb-1 form-check form-switch'>
                    <input id='sw-inverse' type='checkbox' class='form-check-input'>
                    <label for='sw-inverse' class='form-check-label text-end'>Allow inverse rules</label>
                </div>
                <div class='mb-1 form-check form-switch'>
                    <input id='sw-dead' type='checkbox' class='form-check-input' checked>
                    <label for='sw-dead' class='form-check-label text-end'>Stop at still life</label>
                </div>
                <div class='mb-1 form-check form-switch'>
                    <input id='sw-colors' type='checkbox' class='form-check-input' checked>
                    <label for='sw-colors' class='form-check-label text-end'>Show cell age</label>
                </div>
                <div class='mb-1 form-check form-switch'>
                    <input id='sw-fps' type='checkbox' class='form-check-input'>
                    <label for='sw-fps' class='form-check-label text-end'>Show generation speed</label>
                </div>
                <div>
                    <hr class='dropdown-divider'>
                </div>
                <div class='mb-1 mt-1 form-floating'>
                    <select id='in-engine' class='form-select' aria-label='Choose engine'>
                        <option value='hashlife' selected>HashLife</option>
                        <option value='worker'>Web Worker</option>
                        <option value='naive'>Naive</option>
                    </select>
                    <label for='in-engine'>Engine</label>
                </div>
            </form>
            <a id='btn-lock' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Lock'>
                <i class='fas fa-unlock' aria-hidden='true'></i>
            </a>
            <a id='btn-night' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Dark mode'>
                <i class='fas fa-lightbulb' aria-hidden='true'></i>
            </a>
        </div>
        <div class='btn-group mb-1' role='group'>
            <a id='btn-hide' type='button' class='btn btn-secondary' data-bs-toggle='tooltip' data-bs-placement='bottom' title='Hide'>
                <i class='fas fa-arrow-right' aria-hidden='true'></i>
            </a>
        </div>
    </div>

    <div id='info' class='btn-toolbar d-flex flex-wrap-reverse justify-content-end' role='toolbar'>
        <div class='input-group collapse'>
            <span class='input-group-text bg-secondary text-white border-0'>gps</span>
            <span id='out-fps' type='text' class='form-control'>0 | 0 | 0</span>
        </div>
        <div class='input-group'>
            <span class='input-group-text bg-secondary text-white border-0'>Generation</span>
            <span id='out-gens' type='text' class='form-control'>0</span>
        </div>
        <div class='input-group'>
            <span class='input-group-text bg-secondary text-white border-0'>Population</span>
            <span id='out-populus' type='text' class='form-control'>0</span>
        </div>
    </div>

    <div id='modal-save' class='modal fade' tabindex='-1' aria-hidden='true'>
        <div class='modal-dialog modal-dialog-centered'>
            <div class='modal-content'>
                <div class='modal-header'>
                    <h5 class='modal-title' id='modal-save-label'>Save pattern</h5>
                    <button type='button' class='btn-close' data-bs-dismiss='modal' aria-label='Close'></button>
                </div>
                <form class='modal-body' autocomplete='off'>
                    <div class='form-floating mb-3'>
                        <input id='in-file-title' type='text' class='form-control'>
                        <label for='in-file-title'>Title</label>
                    </div>
                    <div class='form-floating mb-3'>
                        <input id='in-file-author' type='text' class='form-control'>
                        <label for='in-file-author'>Author</label>
                    </div>
                    <div class='form-floating mb-3'>
                        <textarea id='in-file-comments' class='form-control' aria-label='Comments'></textarea>
                        <label for='in-file-comments'>Comments</label>
                    </div>
                    <div class='input-group mb-3'>
                        <div class='form-floating'>
                            <input id='in-file-name' type='text' class='form-control' aria-label='Filename'>
                            <label for='in-file-name'>File name</label>
                        </div>
                        <select id='in-file-format' class='input-group-text' aria-label='File format' disabled>
                            <option value='rle' selected>.rle</option>
                            <option value='life'>.lif</option>
                        </select>
                    </div>
                </form>
                <div class='modal-footer'>
                    <button type='button' class='btn btn-secondary' data-bs-dismiss='modal'>Close</button>
                    <button id='btn-download' type='button' class='btn btn-primary'>Download</button>
                </div>
            </div>
        </div>
    </div>

    <div id='modal-gallery' class='modal fade' tabindex='-1' aria-hidden='true'>
        <div class='modal-dialog modal-xl modal-dialog-scrollable modal-dialog-centered'>
            <div class='modal-content'>
                <div class='modal-header'>
                    <h5 class='modal-title' id='modal-save-label'>Pattern gallery</h5>
                    <button type='button' class='btn-close' data-bs-dismiss='modal' aria-label='Close'></button>
                </div>
                <div class='modal-body'>
                    <div class='container'>
                        <div class='row'>
                            <div class='col-lg-8 col-md-5 col-sm-4 col-3 border-end pe-3'>
                                <canvas id='gallery-preview' class='sticky-top collapse'></canvas>
                            </div>
                            <div class='col-lg-4 col-md-7 col-sm-8 col-9 border-start pe-0'>
                                <div class='ms-2'>
                                    <select id='gallery-set' class='form-select' aria-label='Choose set of files'>
                                    </select>
                                </div>
                                <hr class='my-2 ms-2'/>
                                <div class='ms-2 mb-3'>
                                    <div id='gallery-file-list' class='list-group'>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class='modal-footer'>
                    <button type='button' class='btn btn-secondary' data-bs-dismiss='modal'>Close</button>
                    <button id='btn-gallery-load' type='button' class='btn btn-primary'>Load pattern</button>
                </div>
            </div>
        </div>
    </div>

    <div id='info-toast' class='toast align-items-center position-relative bg-secondary bg-gradient text-white border-0' role='alert' aria-live='assertive' aria-atomic='true'>
        <div class='d-flex'>
            <button type='button' class='btn-close btn-close-white my-auto ms-2' data-bs-dismiss='toast' aria-label='Close'></button>
            <div class='toast-body'> </div>
        </div>
    </div>
</body>
</html>
